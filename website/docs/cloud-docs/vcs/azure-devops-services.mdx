---
page_title: Azure DevOps Services - VCS Providers - Terraform Cloud
---

# Configuring Azure DevOps Services Access

These instructions are for using dev.azure.com for Terraform Cloud's VCS features. [Other supported VCS providers](/cloud-docs/vcs) have separate instructions.

This page explains the four main steps required to connect Terraform Cloud to your Azure DevOps Services VCS:

1. Create a new connection in Terraform Cloud and get the callback URL.
1. On your VCS, register your Terraform Cloud organization as a new application. Provide the callback URL and get the application ID and key.
1. Provide Terraform Cloud with the application ID and key. Then, request VCS access.
1. On your VCS, approve the access request from Terraform Cloud.

~> **Important:** Terraform Cloud only supports Azure DevOps connections that use the `dev.azure.com` domain. If your Azure DevOps project uses the older `visualstudio.com` domain, you must migrate using the [steps in the Microsoft documentation](https://docs.microsoft.com/en-us/azure/devops/release-notes/2018/sep-10-azure-devops-launch#switch-existing-organizations-to-use-the-new-domain-name-url).

## Requirements

Configuring a new VCS provider requires permission to [manage VCS settings](/cloud-docs/users-teams-organizations/permissions#manage-vcs-settings) for the organization.

[permissions-citation]: #intentionally-unused---keep-for-maintainers

Before you begin, enable `Third-party application access via OAuth` in Azure DevOps Services settings.

1. Log in to [Azure DevOps Services](https://dev.azure.com/).
1. Click **Organization settings** in the bottom of the sidebar.
1. Click **Policies** in the sidebar under **Security**.
1. Enable the **Third-party application access via OAuth** setting.

## Adding a New VCS Provider on Terraform Cloud

1. Log in to Terraform Cloud and navigate to the organization where you want to add a VCS connection.
1. Click **Settings** in the menu bar and then click **Providers** under **Version control** in the sidebar.
1. Click **Add VCS a Provider**. The **Add a VCS Provider** page appears.
1. Open the **Azure DevOps** menu and then select **Azure DevOps Services**. The **Set up provider** page appears.

Leave this page open in a browser tab for future use.

## Creating a New Application

1. In a new browser tab, open your [Azure DevOps Services Profile](https://aex.dev.azure.com) and log in to your Azure DevOps Services account if necessary. A page with a list of your organizations appears.

   ~> **Important:** The Azure DevOps Services account you use for connecting Terraform Cloud must have Project Collection Administrator access to any projects containing repositories of Terraform configurations, since creating webhooks requires admin permissions. It is not possible to create custom access roles with lower levels of privilege, as Microsoft does not currently allow delegation of this capability. If you're unable to load the link above, you can create a new application using one of the following links: `https://aex.dev.azure.com/app/register?mkt=en-US` or `https://app.vsaex.visualstudio.com/app/register?mkt=en-US`.

1. Go into your preferred organization.

1. Click your user icon in the top right, click the **ellipses (...) **, and select **User settings**.

1. From the User settings menu, click **Profile**. Your profile page appears.

1. In the left sidebar, click **Authorizations**. The Authorized OAuth Apps page appears.

1. Click the link to register a new app. A form appears asking for your company and application information.

1. Fill out the fields and checkboxes with the corresponding values currently displayed in your Terraform Cloud browser tab. Terraform Cloud lists the values in the order they appear and includes controls for copying values to your clipboard. Here is an example:

   | Field name                 | Value                                                                         |
   | -------------------------- | ----------------------------------------------------------------------------- |
   | Company name               | HashiCorp                                                                     |
   | Application Name           | Terraform Cloud (`<YOUR ORGANIZATION NAME>`)                                  |
   | Application website        | `https://app.terraform.io` (or the URL of your Terraform Enterprise instance) |
   | Authorization callback URL | `https://app.terraform.io/<YOUR CALLBACK URL>`                                |

   In the **Authorized scopes** section, select only **Code (read)** and **Code (status)** and then click **Create Application.**

   ~> **Important:** Do not add any additional scopes beyond **Code (read)** and **Code (status)** because additional scopes can prevent Terraform Cloud from connecting. You cannot update these authorized scopes after the application's creation. To fix incorrect scopes, you must delete and re-create the application.

1. After creating the application, the next page displays its details. Leave this page open in a browser tab for future use.

   If you accidentally close this details page and need to find it later, you can reach it from the **Applications and Services** links at the bottom left of your profile.

## Setting up Your Provider on Terraform Cloud

1. (Optional) Enter a **Name** for this VCS connection.

1. Enter your Azure DevOps Services application's **App ID** and **Client Secret** from your previously open browser tab.

1. Click **Connect and continue.** This action takes you to a page on Azure DevOps Services, asking whether you want to authorize the app. Click **Accept** to return to Terraform Cloud.

   -> **Note:** If you receive a 404 error from Azure DevOps Services, it likely means you configured your callback URL incorrectly.

## Setting Up SSH Keypair on Terraform Cloud (Optional)

Most organizations do not need to add an SSH private key. However, if the organization repositories include Git submodules that are only accessible using SSH, you can add an SSH key along with the OAuth credentials. You can add or update the SSH private key at a later time.

### Important Notes

- You only use SSH to clone Git submodules. All other Git operations still use HTTPS.
- Do not use your personal SSH key to connect Terraform Cloud and Azure DevOps Services. Generate a new one or use an existing key reserved for service access.
- In upcoming steps, you must provide Terraform Cloud with the private key. Although Terraform Cloud does not display the text of the key to users after you enter it, Terraform Cloud retains the key and uses it for authenticating to Azure DevOps Services.
- Protect this private key carefully. It can push code to the repositories you use to manage your infrastructure. Follow your organization's policies for protecting important credentials.

### If You Do Not Need an SSH Keypair:

1. Click **Skip and Finish**. This action returns you to Terraform Cloud's VCS Providers page, which now includes your new Azure DevOps Services client.

### If You Do Need an SSH Keypair:

1. On a secure workstation, create an SSH keypair that Terraform Cloud can use to connect to Azure DevOps Services.com. The exact command depends on your OS, but is usually something like:
   `ssh-keygen -t rsa -m PEM -f "/Users/<NAME>/.ssh/service_terraform" -C "service_terraform_enterprise"`
   This action creates a `service_terraform` file with the private key, and a `service_terraform.pub` file with the public key. This SSH key **must have an empty passphrase**. Terraform Cloud cannot use SSH keys that require a passphrase.

1. While logged into the Azure DevOps Services account you want Terraform Cloud to act as, navigate to the SSH Keys settings page, add a new SSH key and paste the value of the SSH public key you just created.

1. On Terraform Cloud's **Add VCS Provider** page, paste the text of the **SSH private key** you just created, and click **Add SSH Key**.

You successfully configured Azure DevOps Server access for Terraform Cloud. You can create Terraform workspaces based on your organization's repositories.
