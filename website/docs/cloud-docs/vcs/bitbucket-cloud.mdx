---
page_title: Bitbucket Cloud - VCS Providers - Terraform Cloud
---

# Configuring Bitbucket Cloud Access

These instructions are for using Bitbucket Cloud for Terraform Cloud's VCS features. Bitbucket Cloud is the cloud-hosted version of Bitbucket; [self-hosted Bitbucket Server instances have separate instructions,](/cloud-docs/vcs/bitbucket-server) as do the [other supported VCS providers.](/cloud-docs/vcs)

Configuring a new VCS provider requires permission to manage VCS settings for the organization. ([More about permissions.](/cloud-docs/users-teams-organizations/permissions))

[permissions-citation]: #intentionally-unused---keep-for-maintainers

Connecting Terraform Cloud to your VCS involves four steps:

| On your VCS                                                                                    | On Terraform Cloud                                            |
| ---------------------------------------------------------------------------------------------- | ------------------------------------------------------------- |
|                                                                                                | Create a new connection in Terraform Cloud. Get callback URL. |
| Register your Terraform Cloud organization as a new app. Provide callback URL. Get ID and key. |                                                               |
|                                                                                                | Provide Terraform Cloud with ID and key. Request VCS access.  |
| Approve access request.                                                                        |                                                               |

The rest of this page explains the Bitbucket Cloud-specific versions of these steps.

## Adding a New VCS Provider on Terraform Cloud

1. Open Terraform Cloud in your browser and navigate to **Settings > Version Control > Providers** for your organization.

1. Click **Add VCS Provider**. If you just created your organization, you might already be on this page. Otherwise:

   1. Make sure the bottom-left organization menu currently shows your organization.
   1. Click the **Settings** link at the top of the page (or within the ☰ menu).
   1. On the next page, click **Providers** under **Version Control** in the left sidebar.
   1. Click **Add a VCS Provider**.

1. To use Bitbucket as your version control provider, select **Bitbucket Cloud** from the **Bitbucket** dropdown. The page moves to the next step.

Leave the page open in a browser tab for future use.

## Creating a New OAuth Consumer on Bitbucket Cloud

1. In a new browser tab, open [Bitbucket Cloud](https://bitbucket.org) and log in as whichever account you want Terraform Cloud to act as. For most organizations, this account should be a dedicated service user, but a personal account also works.

   ~> **Important:** The account you use for connecting Terraform Cloud must have admin access to any shared repositories of Terraform configurations because creating webhooks requires admin permissions.

1. Navigate to Bitbucket's **Add OAuth Consumer** page at `https://bitbucket.org/<YOUR WORKSPACE NAME>/workspace/settings/oauth-consumers/new`. You can also reach it through Bitbucket's menus:

   - In the lower left corner, click your profile picture and choose the workspace you want to access.
   - In the workspace navigation, click **Settings**.
   - In the settings navigation, click **OAuth consumers** in the **Apps and Features** section.
   - On the OAuth settings page, click **Add consumer*.

1. Fill out the fields and checkboxes with the corresponding values currently displayed in your Terraform Cloud browser tab. Terraform Cloud lists the values in the order they appear and includes controls for copying values to your clipboard.

   Fill out the text fields as follows:

   | Field        | Value                                                                         |
   | ------------ | ----------------------------------------------------------------------------- |
   | Name         | Terraform Cloud (`<YOUR ORGANIZATION NAME>`)                                  |
   | Description  | Any description of your choice.                                               |
   | Callback URL | `https://app.terraform.io/<YOUR CALLBACK URL>`                                |
   | URL          | `https://app.terraform.io` (or the URL of your Terraform Enterprise instance) |

   Check the "This is a private consumer" option. Then, activate the following permissions checkboxes:

   | Permission type | Permission level |
   | --------------- | ---------------- |
   | Account         | Write            |
   | Repositories    | Admin            |
   | Pull requests   | Write            |
   | Webhooks        | Read and write   |

1. Click **Save** to returns to the OAuth settings page.

1. Find your new OAuth consumer under the "OAuth Consumers" heading and click its name to reveal its details.

   Leave this page open in a browser tab for future use.

## Setting up Your Provider on Terraform Cloud

1. Enter the **Key** and **Secret** from the previous step, as well as an optional **Name** for this VCS connection.

1. Click "Connect and continue." to go to a Bitbucket Cloud page asking whether you want to authorize the app.

1. Click **Grant access**.

## Settting Up SSH Keypair on Terraform Cloud (Optional)

Most organizations do not need to add an SSH private key. However, if the organization's repositories include Git submodules that are only accessible using SSH, you can add an SSH key along with the OAuth credentials. You can add or update the SSH private key at a later time.

### Important Notes

- You can only use SSH to clone Git submodules. All other Git operations still use HTTPS.
- Do not use your personal SSH key to connect Terraform Cloud and Bitbucket Cloud; generate a new one or use an existing key reserved for service access.
- In the following steps, you must provide Terraform Cloud with the private key. Although Terraform Cloud does not display the text of the key to users after you enter it, Terraform Cloud retains the key and uses it for authenticating to Bitbucket Cloud.
- Protect this private key carefully. It can push code to the repositories you use to manage your infrastructure. Follow your organization's policies for protecting important credentials.

### If You Do Not Need an SSH Keypair:

1. Click **Skip and Finish** to return to Terraform Cloud's VCS Providers page, which now includes your new Bitbucket Cloud client.

### If You Do Need an SSH Keypair:

1. On a secure workstation, create an SSH keypair that Terraform Cloud can use to connect to Bitbucket Cloud. The exact command depends on your OS, but is usually something like `ssh-keygen -t rsa -m PEM -f "/Users/<NAME>/.ssh/service_terraform" -C "service_terraform_enterprise"`.
   
   This action creates a `service_terraform` file with the private key and a `service_terraform.pub` file with the public key. This SSH key must have an empty passphrase. Terraform Cloud cannot use SSH keys that require a passphrase.

1. While logged into the Bitbucket Cloud account you want Terraform Cloud to act as, navigate to the **SSH Keys settings** page, add a new SSH key, and paste the value of the SSH public key you just created.

1. On Terraform Cloud's **Add VCS Provider** page, paste the text of the **SSH private key** you just created and click **Add SSH Key**.

You successfully configured Bitbucket Cloud access for Terraform Cloud. You can create Terraform workspaces based on your organization's repositories.
