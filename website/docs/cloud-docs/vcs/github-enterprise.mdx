---
page_title: GitHub Enterprise - VCS Providers - Terraform Cloud
---

# Configuring GitHub Enterprise Access

These instructions are for using an on-premise installation of GitHub Enterprise for Terraform Cloud's VCS features. [GitHub.com has separate instructions,](/cloud-docs/vcs/github-enterprise) as do the [other supported VCS providers.](/cloud-docs/vcs)

Configuring a new VCS provider requires permission to manage VCS settings for the organization. ([More about permissions.](/cloud-docs/users-teams-organizations/permissions))

[permissions-citation]: #intentionally-unused---keep-for-maintainers

Connecting Terraform Cloud to your VCS involves four steps:

| On your VCS                                                                                    | On Terraform Cloud                                            |
| ---------------------------------------------------------------------------------------------- | ------------------------------------------------------------- |
|                                                                                                | Create a new connection in Terraform Cloud. Get callback URL. |
| Register your Terraform Cloud organization as a new app. Provide callback URL. Get ID and key. |                                                               |
|                                                                                                | Provide Terraform Cloud with ID and key. Request VCS access.  |
| Approve access request.                                                                        |                                                               |

The rest of this page explains the GitHub Enterprise versions of these steps.

~> **Important:** Terraform Cloud needs to contact your GitHub Enterprise instance during setup and during normal operation. For the SaaS version of Terraform Cloud, this means GitHub Enterprise must be internet-accessible; for Terraform Enterprise, you must have network connectivity between your Terraform Enterprise and GitHub Enterprise instances.

-> **Note:** Alternately, you can skip the OAuth configuration process and authenticate with a personal access token. This requires using Terraform Cloud's API. For details, see [the OAuth Clients API page](/cloud-docs/api-docs/oauth-clients).

## Adding a New VCS Provider on Terraform Cloud

1. Open Terraform Cloud in your browser and navigate to **Settings > Version Control > Providers** for your organization.

1. Click **Add VCS Provider**. If you just created your organization, you might already be on this page. Otherwise:

   1. Make sure the bottom-left organization menu currently shows your organization.
   1. Click the **Settings** link at the top of the page (or within the ☰ menu).
   1. On the next page, click **Providers** under **Version Control** in the left sidebar.
   1. Click **Add a VCS Provider**.

1. Select **GitHub Enterprise** from the **Github** dropdown.

1. Fill in the **HTTP URL** and **API URL** of your GitHub Enterprise instance, as well as an optional **Name** for this VCS connection.

   | Field    | Value                                       |
   | -------- | ------------------------------------------- |
   | HTTP URL | `https://<GITHUB INSTANCE HOSTNAME>`        |
   | API URL  | `https://<GITHUB INSTANCE HOSTNAME>/api/v3` |

Leave the page open in a browser tab for future use.

## Creating a New OAuth Application on GitHub

1. In a new browser tab, open your GitHub Enterprise instance and log in as whichever account you want Terraform Cloud to act as. For most organizations, this account should be a dedicated service user, but a personal account also works.

   ~> **Important:** The account you use for connecting Terraform Cloud must have admin access to any shared repositories of Terraform configurations because creating webhooks requires admin permissions.

1. Navigate to GitHub's **Register a New OAuth Application** page.

   You can browse directly to the page at `https://<GITHUB INSTANCE HOSTNAME>/settings/applications/new`. You can also reach it through GitHub's menus:

   - In the upper right corner, click your profile picture and choose **Settings**.
   - In the navigation sidebar, click "OAuth Apps" (under the **Developer settings** section).
   - In the upper right corner, click **Register a new application**.

1. Fill out the fields with the corresponding values currently displayed in your Terraform Cloud browser tab. Terraform Cloud lists the values in the order they appear and includes controls for copying values to your clipboard.

   Fill out the text fields as follows:

   | Field name                 | Value                                                                         |
   | -------------------------- | ----------------------------------------------------------------------------- |
   | Application Name           | Terraform Cloud (`<YOUR ORGANIZATION NAME>`)                                  |
   | Homepage URL               | `https://app.terraform.io` (or the URL of your Terraform Enterprise instance) |
   | Application Description    | Any description of your choice.                                               |
   | Authorization callback URL | `https://app.terraform.io/<YOUR CALLBACK URL>`                                |

1. Click **Register application**, which creates the application and takes you to its page.

1. <a href="/img/docs/tfe_logo.png" download>Download this image of the Terraform logo</a>, upload it by click **Upload new logo** or the drag-and-drop target, and set the badge background color to `#5C4EE5`. This optional step helps you identify Terraform Cloud's pull request checks at a glance.

   Leave this page open in a browser tab. You need the unique **Client ID** and **Client Secret** for future use.

## Setting up Your Provider on Terraform Cloud

1. On the **Configure settings** tab, enter the **Client ID** and **Client Secret** from the previous step.

1. Click "Connect and continue" to go to a page on your GitHub Enterprise instance, asking whether you want to authorize the app.

1. The authorization page lists any GitHub organizations to which this account belongs. If there is a **Request** button next to the organization that owns your Terraform code repositories, click it now. You must click it even if you are only connecting workspaces to private forks of repositories in those organizations because those forks are subject to the organization's access restrictions. Refer to [About OAuth App access restrictions](https://help.github.com/articles/about-oauth-app-access-restrictions).

   If you receive a 500 error, it usually means Terraform Cloud cannot reach your GitHub Enterprise instance.

1. Click **Authorize `<GITHUB USER>`** at the bottom of the authorization page. GitHub might request your password to confirm the operation.

## Setting Up an SSH Keypair on Terraform Cloud (Optional)

Most organizations do not need to add an SSH private key. However, if the organization repositories include Git submodules that are only accessible using SSH, you can add an SSH key along with the OAuth credentials. You can add or update the SSH private key at a later time.

### Important Notes

- You only use SSH to clone Git submodules. All other Git operations still use HTTPS.
- Do not use your personal SSH key to connect Terraform Cloud and GitHub Enterprise. Generate a new one or use an existing key reserved for service access.
- In upcoming steps, you must provide Terraform Cloud with the private key. Although Terraform Cloud does not display the text of the key to users after you enter i, Terraform Cloud retains the key and uses it for authenticating to GitHub Enterprise.
- Protect this private key carefully. It can push code to the repositories you use to manage your infrastructure. Follow your organization's policies for protecting important credentials.

### If You Do Not Need an SSH Keypair:

1. Click **Skip and Finish** to return to Terraform Cloud's **VCS Providers** page, which now includes your new GitHub Enterprise client.

### If You Do Need an SSH Keypair:

1. On a secure workstation, create an SSH keypair that Terraform Cloud can use to connect to Bitbucket Cloud. The exact command depends on your OS, but is usually something like `ssh-keygen -t rsa -m PEM -f "/Users/<NAME>/.ssh/service_terraform" -C "service_terraform_enterprise"`
  
   This action creates a `service_terraform` file with the private key, and a `service_terraform.pub` file with the public key. This SSH key **must have an empty passphrase**. Terraform Cloud cannot use SSH keys that require a passphrase.

1. While logged into the GitHub Enterprise account you want Terraform Cloud to act as, navigate to the **SSH Keys settings** page.

1. Add a new SSH key and paste the value of the SSH public key you just created.

1. On Terraform Cloud's **Add VCS Provider** page, paste the text of the **SSH private key** you just created.

1. Click **Add SSH Key**.

## Contacting Your GitHub Organization Admins

If your organization uses OAuth app access restrictions, you had to click **Request** when authorizing Terraform Cloud, which sent an automated email to the administrators of your GitHub organization. An administrator must approve the request before Terraform Cloud can access your organization's shared repositories.

If you are a GitHub administrator, check your email now and respond to the request. Otherwise, contact whoever is responsible for GitHub accounts in your organization and wait for confirmation that they approved your request.

## Finished

You successfully configured GitHub access for Terraform Cloud. You can create Terraform workspaces based on your organization's repositories.
