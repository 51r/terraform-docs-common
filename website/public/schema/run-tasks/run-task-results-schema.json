{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "This structure contains the detailed information about why a Run Task has failed / not passed.",
  "$defs": {
    "RunTaskResult": {
      "type": "object",
      "properties": {
        "data": {
          "type": "object",
          "title": "Data",
          "description": "The main `data` property specified by JSON:API",
          "properties": {
            "type": {
              "title": "The JSON:API `type`",
              "description": "This is a fixed string of 'task-results' and may not be changed",
              "const": "task-results"
            },
            "attributes": {
              "title": "The JSON:API `attributes` collection",
              "description": "This object describes the Run Task Result object properties.",
              "type": "object",
              "properties": {
                "status": {
                  "title": "Run Task Status",
                  "description": "The current status of the Run Task.",
                  "enum": ["running", "passed", "failed"]
                },
                "message": {
                  "title": "Message",
                  "description": "A short message describing the status of the task.",
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 1000
                },
                "url": {
                  "title": "Url",
                  "description": "A URL where users can obtain more information about the Run Task.",
                  "type": "string",
                  "format": "uri",
                  "maxLength": 500
                },
                "outcomes": {
                  "title": "Outcomes",
                  "description": "An array of Run Task Outcomes, providing details as to why a specific integration may have failed.",
                  "type": "array",
                  "items": { "$ref": "#/$defs/RunTaskOutcome" },
                  "minItems": 1,
                  "maxItems": 10
                }
              },
              "required": ["status"]
            }
          }
        }
      },
      "required": ["data"]
    },
    "RunTaskOutcome": {
      "title": "Run Task Result Outcome",
      "description": "A detailed record containing information about a Run Task check that has contributed to the overall Run Task status.",
      "type": "object",
      "properties": {
        "outcome_id": {
          "title": "Outcome ID",
          "description": "A partner supplied identifier. Note that this identifier does not have to be unique.",
          "type": "string",
          "minLength": 1,
          "maxLength": 64
        },
        "description": {
          "title": "Description",
          "description": "A short one-line description of the outcome.",
          "type": "string",
          "minLength": 1,
          "maxLength": 1000
        },
        "tags": {
          "title": "Tags",
          "description": "Up to 5 tags with labels, containing data or metadata of an outcome.",
          "type": "array",
          "maxItems": 5,
          "items": { "$ref": "#/$defs/RunTaskTag" }
        },
        "body": {
          "title": "Body",
          "description": "Markdown text which will be rendered to the user in the Terraform Cloud Run UI.",
          "type": "string",
          "minLength": 1,
          "maxLength": 10000
        },
        "url": {
          "title": "Url",
          "description": "A URL linking this result to a page with more information, provided by the integration partner.",
          "type": "string",
          "format": "uri",
          "maxLength": 500
        }
      }
    },
    "RunTaskTag": {
      "title": "Run Task Result Tag",
      "description": "A label heading with a value, or array of rich values",
      "type": "object",
      "properties": {
        "label": {
          "title": "Label",
          "description": "The heading text to display to the user",
          "type": "string",
          "minLength": 1,
          "maxLength": 32
        },
        "value": {
          "title": "Value",
          "description": "The contents of the tag, to be rendered as one or more labels with optional colors and icons.",

          "anyOf": [
            { "$ref": "#/$defs/RunTaskRichLabel" },
            {
              "type": "array",
              "items": { "$ref": "#/$defs/RunTaskRichLabel" },
              "minItems": 1,
              "maxItems": 10
            }
          ]
        }
      }
    },
    "RunTaskRichLabel": {
      "title": "Run Task Result Rich Label",
      "description": "Defines text labels with optional status level used to inform icons and colors",
      "type": "object",
      "properties": {
        "label": {
          "title": "Label",
          "description": "The text to display to the user",
          "type": "string",
          "minLength": 1,
          "maxLength": 32
        },
        "level": {
          "title": "Level",
          "description": "Level, to be used rendering the label, defines the icon and color.",
          "enum": ["none", "info", "warning", "error"],
          "default": "none"
        }
      },
      "required": ["value"]
    }
  }
}
